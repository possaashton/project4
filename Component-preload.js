//@ui5-bundle project2/Component-preload.js
sap.ui.predefine("project2/Component", ["sap/ui/core/UIComponent","project2/model/models"],(e,t)=>{"use strict";return e.extend("project2.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("project2/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("project2.controller.App",{onInit(){}})});
sap.ui.predefine("project2/controller/IIS_View1.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast"],function(e,o){"use strict";return e.extend("project2.controller.IIS_View1",{onInit:function(){},onUpdateUser:async function(){const e=this._frmValidation();if(!e)return;try{const e="manager";const n="B1Admin";const t=this.byId("mcbDBSelector").getSelectedKeys();for(const s of t){const t={CompanyDB:s,UserName:e,Password:n};const a=await this._login(t);if(!a)continue;const r=await this._getUser(a);if(!r)continue;await this._updateUser(a,r);o.show(`User updated in ${s}`)}}catch(e){console.error(e);o.show("Error: "+e.message)}},_frmValidation:function(){if(this.byId("ipUserCode").getValue()===""||this.byId("ipUserName").getValue()===""){o.show("UserCode/UserName cannot be blank");return false}if(this.byId("mcbDBSelector").getSelectedKeys().length===0){o.show("Please select at least one Database");return false}return true},_login:async function(e){const n=await fetch("/b1s/v1/Login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});const t=await n.json();if(!n.ok||t.error){o.show(`Login failed for ${e.CompanyDB}`);return null}return t.SessionId},_getUser:async function(e){const n=this.byId("ipUserCode").getValue();const t=await fetch(`/b1s/v1/Users?$filter=UserCode eq '${n}'`,{method:"GET",headers:{"Content-Type":"application/json","B1S-Session":e}});if(!t.ok){o.show("User lookup failed");return null}const s=await t.json();if(!s.value||s.value.length===0){o.show(`User '${n}' not found`);return null}return s.value[0]},_updateUser:async function(e,o){const n=o.InternalKey;const t=this.byId("ipUserName").getValue();const s=await fetch(`/b1s/v1/Users(${n})`,{method:"PATCH",headers:{"Content-Type":"application/json","B1S-Session":e},body:JSON.stringify({UserName:t})});if(!s.ok){throw new Error(`User update failed in DB ${o.DbName||""}`)}},frmValidation:async function(){if(this.byId("ipUserCode").getValue()==""||this.byId("ipUserName").getValue()==""){console.log("UserCode/UserName Cannot be blank");o.show("UserCode/UserName Cannot be blank");return false}var e=this.byId("mcbDBSelector").getSelectedKeys();if(e.length==0){console.log("Databases/User Authorizations Cannot be blank");o.show("Databases/User Authorizations Cannot be blank");return false}return true},testMultiDBUserFetch:async function(){const e="manager";const o="B1Admin";const n="manager";const t=["SBODemoUS","SBODemoGB"];const s={SBODemoUS:"B1S_US",SBODemoGB:"B1S_GB"};for(const a of t){const t=s[a];if(!t){console.warn(`No destination configured for ${a}`);continue}try{const s=await fetch(`/destinations/${t}/b1s/v1/Login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CompanyDB:a,UserName:e,Password:o})});const r=await s.json();if(!s.ok||r.error||!r.SessionId){console.error(`Login failed for ${a}`,r);continue}const i=r.SessionId;console.log(`Logged into ${a}, SessionId: ${i}`);const c=await fetch(`/destinations/${t}/b1s/v1/Users?$filter=UserCode eq '${n}'`,{method:"GET",headers:{"Content-Type":"application/json","B1S-Session":i}});const l=await c.json();if(!l.value||l.value.length===0){console.warn(`User '${n}' not found in ${a}`)}else{console.log(`User in ${a}:`,l.value[0])}await fetch(`/destinations/${t}/b1s/v1/Logout`,{method:"POST",headers:{"B1S-Session":i}})}catch(e){console.error(`Error processing DB ${a}:`,e)}}}})});
sap.ui.predefine("project2/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"project2/i18n/i18n.properties":'# This is the resource bundle for project2\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=App Title\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=App Title',
	"project2/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"project2","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.7","toolsId":"00604bd1-b834-4977-bea3-b70d73f524ef"},"dataSources":{"mainService":{"uri":"/b1s/v1/","type":"OData","settings":{"annotations":[],"localUri":"localService/mainService/metadata.xml","odataVersion":"2.0"}},"SAPB1DB":{"uri":"model/SAPB1DB.json","type":"JSON"},"UserAuthorization":{"uri":"model/UserAuthorization.json","type":"JSON"}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.140.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"project2.i18n.i18n","supportedLocales":[""],"fallbackLocale":""}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"SAPB1DB":{"dataSource":"SAPB1DB"},"UserAuthorization":{"dataSource":"UserAuthorization"}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"project2.view","async":true,"viewPath":"project2.view"},"routes":[{"name":"RouteIIS_View1","pattern":":?query:","target":["TargetIIS_View1"]}],"targets":{"TargetIIS_View1":{"id":"IIS_View1","name":"IIS_View1"}}},"rootView":{"viewName":"project2.view.App","type":"XML","id":"App","async":true}}}',
	"project2/view/App.view.xml":'<mvc:View controllerName="project2.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"><pages><mvc:XMLView viewName="project2.view.IIS_View1" id="IISView"/></pages></App></mvc:View>',
	"project2/view/IIS_View1.view.xml":'<mvc:View controllerName="project2.controller.IIS_View1"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><Page title="User Management" id="page1"><content><VBox class="sapUiSmallMargin" id="content1"><Label text="User Code" id="lblUserCode"/><Input id="ipUserCode" placeholder="Enter User Code"/><Label text="User Name" id="lblUserName"/><Input id="ipUserName" placeholder="Enter User Name"/><Label text="Select Databases" id="lblDatabases"/><MultiComboBox\n                    id="mcbDBSelector"\n                    placeholder="Select one or more databases..."\n                    items="{SAPB1DB>/SAPB1DB}"><core:Item id="dbItems" key="{SAPB1DB>ProductID}" \n                        text="{SAPB1DB>Name}" xmlns:core="sap.ui.core"/></MultiComboBox><Label text="Select Authorizations" id="lblAuthGroups"/><MultiComboBox\n                    id="mcbAuthorization"\n                    placeholder="Select one or more Authorization..."\n                    items="{UserAuthorization>/UserAuthorization}"><core:Item id="itmAuthorization" key="{UserAuthorization>AuthorizationID}" \n                        text="{UserAuthorization>Name}" xmlns:core="sap.ui.core"/></MultiComboBox><CheckBox id="chkBoyumLicense" text="Assign Boyum License"/><Button id="btnUpdateUser" text="Update User" press=".onUpdateUser" class="sapUiSmallMarginTop"/></VBox></content></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
